trigger:
  batch: true
  branches:
    include:
    - master
    - releases/*
    - features/*
  paths:
    exclude: [ 'README.md' ]

jobs:
- job: BuildWindows

  pool:
    vmImage: 'windows-latest'

  variables:
    pythonVersion: 3.9
    BUILD_PATH: $(Build.BinariesDirectory)\win32
    PYTHON_DIR: $(Build.BinariesDirectory)\win32\cpython-3.9.6-x86_64
    PYTHON_EXE: $(Build.BinariesDirectory)\win32\cpython-3.9.6-x86_64\python.exe
    PYTHON_SCRIPTS_DIR: $(Build.BinariesDirectory)\win32\cpython-3.9.6-x86_64\Scripts
    SDK_DATADIR: $(Build.BinariesDirectory)\win32\ElectrumSV-SDK
    SDK_REPO_DIR: $(Build.BinariesDirectory)\win32\sdk_repo
    SDK_LOG_LEVEL: DEBUG

  steps:
#    - template: windows.yaml
    - script: |
        echo "skipping"

- job: BuildLinux

  pool:
    vmImage: 'ubuntu-latest'

  variables:
    pythonVersion: 3.9
    BUILD_PATH: $(Build.BinariesDirectory)/linux
    PYTHON_DIR: $(Build.BinariesDirectory)/linux/cpython-3.9.6-x86_64
    PYTHON_EXE: $(Build.BinariesDirectory)/linux/cpython-3.9.6-x86_64/python/install/bin/python3
    PYTHON_SCRIPTS_DIR: $(Build.BinariesDirectory)/linux/cpython-3.9.6-x86_64/python/install/bin
    SDK_DATADIR: $(Build.BinariesDirectory)/linux/ElectrumSV-SDK
    SDK_REPO_DIR: $(Build.BinariesDirectory)/linux/sdk_repo

    PYTHON_SITE_PACKAGES: $(Build.BinariesDirectory)/linux/cpython-3.9.6-x86_64/python/install/lib/python$(pythonVersion)/site-packages
    SDK_LOG_LEVEL: DEBUG

  steps :
    - template: linux.yaml

- job: BuildMacOSX

  pool:
    vmImage: 'macOS-10.15'

  variables:
    BUILD_PATH: $(Build.BinariesDirectory)/macosx
    PYTHON_DIR: $(Build.BinariesDirectory)/macosx/cpython-3.9.6-x86_64
    SDK_DATADIR: $(Build.BinariesDirectory)/macosx/ElectrumSV-SDK
    SDK_REPO_DIR: $(Build.BinariesDirectory)/macosx/sdk_repo

  steps :
#    - template: macos.yaml
    - script: |
        echo "skipping"
